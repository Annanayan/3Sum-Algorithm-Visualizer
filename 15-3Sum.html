<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3Sum Visual Walkthrough</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        .container {
            background: #252526;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        h1 {
            color: #4ec9b0;
            text-align: center;
            margin-bottom: 30px;
        }
        .array-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }
        .array-cell {
            width: 60px;
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #3c3c3c;
            border-radius: 4px;
            background: #2d2d30;
            position: relative;
            transition: all 0.3s ease;
        }
        .array-value {
            font-size: 20px;
            font-weight: bold;
            color: #ce9178;
        }
        .array-index {
            font-size: 12px;
            color: #858585;
            margin-top: 4px;
        }
        .pointer {
            position: absolute;
            top: -30px;
            font-size: 14px;
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 3px;
        }
        .pointer-i {
            background: #f48771;
            color: #1e1e1e;
        }
        .pointer-left {
            background: #4ec9b0;
            color: #1e1e1e;
        }
        .pointer-right {
            background: #569cd6;
            color: #1e1e1e;
        }
        .highlight-i {
            border-color: #f48771;
            background: #3d2b28;
        }
        .highlight-left {
            border-color: #4ec9b0;
            background: #283531;
        }
        .highlight-right {
            border-color: #569cd6;
            background: #283540;
        }
        .info-panel {
            background: #2d2d30;
            padding: 20px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #4ec9b0;
        }
        .info-title {
            color: #4ec9b0;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .info-line {
            margin: 8px 0;
            line-height: 1.6;
        }
        .result {
            color: #4ec9b0;
            font-weight: bold;
        }
        .warning {
            color: #f48771;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            font-family: 'Courier New', monospace;
            background: #0e639c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #1177bb;
        }
        button:disabled {
            background: #3c3c3c;
            cursor: not-allowed;
        }
        .step-counter {
            text-align: center;
            font-size: 18px;
            color: #569cd6;
            margin: 20px 0;
        }
        .triplet-found {
            background: #1a4d1a;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            border: 2px solid #4ec9b0;
            animation: pulse 0.5s ease;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .code-line {
            color: #ce9178;
            font-family: 'Courier New', monospace;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç 3Sum Algorithm Visualizer</h1>
        
        <div class="step-counter">
            Step <span id="stepNum">0</span> of <span id="totalSteps">0</span>
        </div>

        <div id="arrayDisplay" class="array-container"></div>

        <div class="info-panel">
            <div class="info-title">Current Status</div>
            <div id="statusText"></div>
        </div>

        <div class="controls">
            <button id="prevBtn" onclick="prevStep()">‚¨ÖÔ∏è Previous</button>
            <button id="nextBtn" onclick="nextStep()">Next ‚û°Ô∏è</button>
            <button onclick="reset()">üîÑ Reset</button>
        </div>

        <div class="info-panel">
            <div class="info-title">Triplets Found</div>
            <div id="results">None yet</div>
        </div>

        <div class="info-panel">
            <div class="info-title">Legend</div>
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <div><span class="pointer pointer-i">i</span> Fixed position (outer loop)</div>
                <div><span class="pointer pointer-left">L</span> Left pointer (moves right)</div>
                <div><span class="pointer pointer-right">R</span> Right pointer (moves left)</div>
            </div>
        </div>
    </div>

    <script>
        const array = [-4, -1, -1, 0, 1, 2];
        let currentStep = 0;
        const results = [];

        // Define all steps of the algorithm
        const steps = [
            {
                i: null, left: null, right: null,
                status: "Starting with sorted array: [-4, -1, -1, 0, 1, 2]<br>We'll fix position 'i' and use two pointers to find pairs."
            },
            {
                i: 0, left: 1, right: 5,
                status: "<span class='warning'>i = 0, nums[i] = -4</span><br>Target sum: -(-4) = 4<br>Looking for pairs that sum to 4<br><br><span class='code-line'>left = i + 1 = 1 (always starts right after i)</span><br><span class='code-line'>right = 5 (always starts at end)</span><br><br>Sum: -4 + (-1) + 2 = -3 (too small)<br>‚Üí Move left pointer right"
            },
            {
                i: 0, left: 2, right: 5,
                status: "<span class='warning'>i = 0, nums[i] = -4</span><br>Target: 4<br><br>Sum: -4 + (-1) + 2 = -3 (too small)<br>‚Üí Move left pointer right"
            },
            {
                i: 0, left: 3, right: 5,
                status: "<span class='warning'>i = 0, nums[i] = -4</span><br>Target: 4<br><br>Sum: -4 + 0 + 2 = -2 (too small)<br>‚Üí Move left pointer right"
            },
            {
                i: 0, left: 4, right: 5,
                status: "<span class='warning'>i = 0, nums[i] = -4</span><br>Target: 4<br><br>Sum: -4 + 1 + 2 = -1 (too small)<br>‚Üí Move left pointer right"
            },
            {
                i: 0, left: 5, right: 5,
                status: "<span class='warning'>i = 0, nums[i] = -4</span><br>Target: 4<br><br>left == right, exit while loop<br>No triplets found for i=0"
            },
            {
                i: 1, left: 2, right: 5,
                status: "<span class='warning'>i = 1, nums[i] = -1</span><br>Target: -(-1) = 1<br><br><span class='code-line'>Note: left RESETS to i+1 for each new i!</span><br><br>Sum: -1 + (-1) + 2 = 0 ‚úì<br><span class='result'>FOUND TRIPLET: [-1, -1, 2]</span>",
                found: [-1, -1, 2]
            },
            {
                i: 1, left: 3, right: 4,
                status: "<span class='warning'>i = 1, nums[i] = -1</span><br>Target: 1<br><br>After finding triplet, moved both pointers<br>(left++ and right--)<br><br>Sum: -1 + 0 + 1 = 0 ‚úì<br><span class='result'>FOUND TRIPLET: [-1, 0, 1]</span>",
                found: [-1, 0, 1]
            },
            {
                i: 1, left: 4, right: 3,
                status: "<span class='warning'>i = 1, nums[i] = -1</span><br><br>left > right, exit while loop<br>Finished searching for i=1"
            },
            {
                i: 2, left: null, right: null,
                status: "<span class='warning'>i = 2, nums[i] = -1</span><br><br>Check: nums[2] == nums[1]? -1 == -1? YES<br><span class='result'>SKIP! (duplicate i value)</span><br><br>We already found all triplets starting with -1 at i=1<br>This avoids duplicate triplets in results"
            },
            {
                i: 3, left: 4, right: 5,
                status: "<span class='warning'>i = 3, nums[i] = 0</span><br>Target: 0<br><br><span class='code-line'>left = i + 1 = 4 (RESET again!)</span><br><br>Sum: 0 + 1 + 2 = 3 (too large)<br>‚Üí Move right pointer left"
            },
            {
                i: 3, left: 4, right: 4,
                status: "<span class='warning'>i = 3, nums[i] = 0</span><br><br>left == right, exit while loop<br>No more triplets found<br><br><span class='result'>FINAL RESULT: [[-1, -1, 2], [-1, 0, 1]]</span>"
            }
        ];

        function renderArray() {
            const container = document.getElementById('arrayDisplay');
            const step = steps[currentStep];
            
            container.innerHTML = array.map((val, idx) => {
                let classes = ['array-cell'];
                let pointers = '';
                
                if (step.i === idx) {
                    classes.push('highlight-i');
                    pointers = '<div class="pointer pointer-i">i</div>';
                }
                if (step.left === idx) {
                    classes.push('highlight-left');
                    pointers = '<div class="pointer pointer-left">L</div>';
                }
                if (step.right === idx) {
                    classes.push('highlight-right');
                    pointers = '<div class="pointer pointer-right">R</div>';
                }
                
                return `
                    <div class="${classes.join(' ')}">
                        ${pointers}
                        <div class="array-value">${val}</div>
                        <div class="array-index">[${idx}]</div>
                    </div>
                `;
            }).join('');
        }

        function updateStatus() {
            const step = steps[currentStep];
            document.getElementById('statusText').innerHTML = step.status;
            
            if (step.found) {
                results.push(step.found);
            }
            
            if (results.length > 0) {
                document.getElementById('results').innerHTML = results
                    .map(r => `<div class="triplet-found">[${r.join(', ')}]</div>`)
                    .join('');
            }
        }

        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                render();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                // Rebuild results array
                results.length = 0;
                for (let i = 0; i <= currentStep; i++) {
                    if (steps[i].found) {
                        results.push(steps[i].found);
                    }
                }
                render();
            }
        }

        function reset() {
            currentStep = 0;
            results.length = 0;
            document.getElementById('results').innerHTML = 'None yet';
            render();
        }

        function render() {
            renderArray();
            updateStatus();
            document.getElementById('stepNum').textContent = currentStep + 1;
            document.getElementById('totalSteps').textContent = steps.length;
            
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === steps.length - 1;
        }

        // Initialize
        render();
    </script>
</body>
</html>